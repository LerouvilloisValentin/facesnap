{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { map, tap } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../../core/services/face-snap.service\";\nimport * as i3 from \"src/app/core/services/culinaire.service\";\nimport * as i4 from \"src/app/core/services/game.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\nfunction NewFaceSnapComponent_div_21_img_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 14);\n  }\n  if (rf & 2) {\n    const faceSnap_r1 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵproperty(\"src\", faceSnap_r1.imageUrl, i0.ɵɵsanitizeUrl)(\"alt\", faceSnap_r1.title);\n  }\n}\nfunction NewFaceSnapComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"h2\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"uppercase\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, NewFaceSnapComponent_div_21_img_7_Template, 1, 2, \"img\", 13);\n    i0.ɵɵelementStart(8, \"p\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const faceSnap_r1 = ctx.ngIf;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 4, faceSnap_r1.title));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Mis en ligne \", i0.ɵɵpipeBind2(6, 6, faceSnap_r1.createdDate, \"\\u00E0 HH:mm, le d MMMM yyyy\"), \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", faceSnap_r1.imageUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(faceSnap_r1.description);\n  }\n}\nexport let NewFaceSnapComponent = /*#__PURE__*/(() => {\n  class NewFaceSnapComponent {\n    constructor(formBuilder, faceSnapsServices, culinaireServices, gameServices, router) {\n      this.formBuilder = formBuilder;\n      this.faceSnapsServices = faceSnapsServices;\n      this.culinaireServices = culinaireServices;\n      this.gameServices = gameServices;\n      this.router = router;\n      this.imageUrl = null;\n      this.selectedFile = null;\n    }\n    onFileSelected(event) {\n      // Récupérer le fichier sélectionné\n      this.selectedFile = event.target.files[0];\n    }\n    uploadImage() {\n      if (this.selectedFile) {\n        // Lire le fichier en tant qu'URL data\n        const reader = new FileReader();\n        reader.onload = e => {\n          // Afficher l'image sur la page\n          if (e.target) {\n            this.imageUrl = e.target.result;\n          }\n        };\n        reader.readAsDataURL(this.selectedFile);\n      }\n    }\n    ngOnInit() {\n      this.urlRegex = /(http(s)?:\\/\\/.)?(www\\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_+.~#?&/=]*)/;\n      this.snapForm = this.formBuilder.group({\n        title: [null, Validators.required],\n        description: [null, Validators.required],\n        imageUrl: [null, Validators.pattern(this.urlRegex)],\n        location: [null]\n      }, {\n        updateOn: 'blur'\n      });\n      this.faceSnapPreview$ = this.snapForm.valueChanges.pipe(map(formValue => ({\n        ...formValue,\n        createdDate: new Date(),\n        id: 0,\n        snaps: 0\n      })));\n    }\n    onSubmitForm() {\n      const currentUrl = this.router.url;\n      if (currentUrl === \"/destinations/create\") {\n        this.faceSnapsServices.addFaceSnap(this.snapForm.value).pipe(tap(() => this.router.navigateByUrl(\"/destinations\"))).subscribe();\n      } else if (currentUrl === \"/culinaire/create\") {\n        this.culinaireServices.addCulinaireExp(this.snapForm.value).pipe(tap(() => this.router.navigateByUrl(\"/culinaire\"))).subscribe();\n      } else if (currentUrl === \"/game/create\") {\n        this.gameServices.addGameExp(this.snapForm.value).pipe(tap(() => this.router.navigateByUrl(\"/game\"))).subscribe();\n      }\n    }\n    static #_ = this.ɵfac = function NewFaceSnapComponent_Factory(t) {\n      return new (t || NewFaceSnapComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.FaceSnapsServices), i0.ɵɵdirectiveInject(i3.CulinaireServices), i0.ɵɵdirectiveInject(i4.GameServices), i0.ɵɵdirectiveInject(i5.Router));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: NewFaceSnapComponent,\n      selectors: [[\"app-new-face-snap\"]],\n      decls: 23,\n      vars: 5,\n      consts: [[1, \"form-card\"], [3, \"formGroup\"], [1, \"form-group\"], [\"for\", \"title\"], [\"type\", \"text\", \"formControlName\", \"title\", \"id\", \"title\"], [\"for\", \"description\"], [\"id\", \"description\", \"type\", \"text\", \"formControlName\", \"description\", \"rows\", \"4\"], [\"for\", \"imageUrl\"], [\"id\", \"imageUrl\", \"type\", \"text\", \"formControlName\", \"imageUrl\"], [1, \"action-buttons\"], [\"type\", \"submit\", 2, \"color\", \"aliceblue\", 3, \"disabled\", \"click\"], [\"class\", \"face-snap-card\", 4, \"ngIf\"], [1, \"face-snap-card\"], [3, \"src\", \"alt\", 4, \"ngIf\"], [3, \"src\", \"alt\"]],\n      template: function NewFaceSnapComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n          i0.ɵɵtext(2, \"NOUVEAU FACESNAP\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"p\");\n          i0.ɵɵtext(4, \" Si vous souhaitez ajouter un URL d'image, il faut depuis une image libre de droit dans google par exemple, faire un clique gauche sur l'image, et cliquer sur \\\"ouvrir l'image dans un nouvel onglet\\\" et copier le lien dans le champs ci-dessous URL de l'image. \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"form\", 1)(6, \"div\", 2)(7, \"label\", 3);\n          i0.ɵɵtext(8, \"Titre\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(9, \"input\", 4);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"div\", 2)(11, \"label\", 5);\n          i0.ɵɵtext(12, \"Description\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(13, \"textarea\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"div\", 2)(15, \"label\", 7);\n          i0.ɵɵtext(16, \"URL de l'image\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(17, \"input\", 8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"div\", 9)(19, \"button\", 10);\n          i0.ɵɵlistener(\"click\", function NewFaceSnapComponent_Template_button_click_19_listener() {\n            return ctx.onSubmitForm();\n          });\n          i0.ɵɵtext(20, \"Enregistrer\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵtemplate(21, NewFaceSnapComponent_div_21_Template, 10, 9, \"div\", 11);\n          i0.ɵɵpipe(22, \"async\");\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"formGroup\", ctx.snapForm);\n          i0.ɵɵadvance(14);\n          i0.ɵɵproperty(\"disabled\", ctx.snapForm.invalid);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(22, 3, ctx.faceSnapPreview$));\n        }\n      },\n      dependencies: [i6.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i6.AsyncPipe, i6.UpperCasePipe, i6.DatePipe],\n      styles: [\".form-card[_ngcontent-%COMP%], .face-snap-card[_ngcontent-%COMP%]{box-sizing:border-box;width:50%;margin:20px auto;padding:10px 30px;box-shadow:#d3d3d3 4px 4px 20px}.face-snap-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.form-group[_ngcontent-%COMP%]{margin:10px auto;width:80%;display:flex;align-items:center;justify-content:space-between;color:#f0f8ff}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:50%}.action-buttons[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{display:block;margin:20px auto}\"]\n    });\n  }\n  return NewFaceSnapComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}